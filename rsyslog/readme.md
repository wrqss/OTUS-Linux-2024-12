Задачние выполнено двух ВМ развернтых на гипервизоре proxmox

1. Производим настроку rsyslog на сервере логирования путем изенения файла `/etc/rsyslog.conf`. Необходимо включить прослушивание 514 порта по UDP и TCP. А так же добавить раздел в конфигурации о правиле приема логов от других хостов. Данные параметры будут отправлять в папку /var/log/rsyslog логи, которые будут приходить от других серверов. Например, Access-логи nginx от сервера web, будут идти в файл `/var/log/rsyslog/web/nginx_access.log`
2. Необходимо внести изменения в конфигурационный файл `/etc/nginx/nginx.conf` для отправки логов на удаленный сервер. 
```
error_log  syslog:server=192.168.100.111:514,tag=nginx_error;
access_log syslog:server=192.168.100.111:514,tag=nginx_access,severity=info combined;
```
3. Проверить работосопобность можно с помощью перемещения стандартной страницы nginx index.html в другую локацию и несколько раз обратившись к веб серверу
![image](https://github.com/user-attachments/assets/4f939b50-2880-443d-9668-b2f5b93cd617)

4. Для настройки аудита необходимо установить пакеты и включить и запустить службу
```
sudo apt install auditd audispd-plugins
sudo systemctl enable auditd
sudo systemctl start auditd
```

5. Для сохранения правила после перезагрузки создадим файл правил `/etc/audit/rules.d/nginx_audit.rules`
Добавим в него следующее правило:
```
  -w /etc/nginx/ -p wa -k nginx_config
```
Пояснения:
-w – указание пути для отслеживания
-p wa – режим аудита: w (изменение содержимого – запись) и a (изменение атрибутов)
-k nginx_config – ключ для удобства поиска событий

6. Для настройки отправления логов аудита, нам потребуется дополнительный пакет `auditd` на стороне отправителя. В конфигурационном файле `/etc/audisp/plugins.d/syslog.conf` необходимо активировать работу `active = yes`
7. В файле `/etc/rsyslog.conf` необходимо добавить адрес сервера на который необхоимо отправить логи
```
*.* @@<192.168.100.111:514

```
8. На стороне сервера дополнительных настроек в данном случае делать не требуется, порт 514 у нас уже поднят.
9. Изменив `/etc/nginx/nginx.conf` на стороне веб севера, мы видим логи аудита на обоих серверах


![image](https://github.com/user-attachments/assets/468dcf21-bc06-4522-9a35-fed91deaa6f7)

![image](https://github.com/user-attachments/assets/7542de05-22ed-45ee-9293-5c6bc7d85b61)

